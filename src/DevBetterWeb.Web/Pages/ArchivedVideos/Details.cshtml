@page
@model DevBetterWeb.Web.Pages.ArchivedVideos.DetailsModel

@{
    ViewData["Title"] = "Details";
}
@section head {

    <link href="//amp.azure.net/libs/amp/latest/skins/amp-default/azuremediaplayer.min.css" rel="stylesheet">
    <script src="//amp.azure.net/libs/amp/latest/azuremediaplayer.min.js"></script>

}


<h3>@Model.ArchiveVideoDetails.DateCreated.UtcDateTime.ToShortDateString()</h3>


<video id="vid1" class="azuremediaplayer amp-default-skin">
    <p class="amp-no-js">
        To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video
    </p>
</video>


<div class="border bg-light p-3 mt-2">
    <label class="font-weight-bold">Notes</label>
    <br />
    
    <markdown markdown="ArchiveVideoDetails.ShowNotes" />
</div>

<div class="border bg-light p-3 mt-2">
    <label class="font-weight-bold">Questions</label>
    <br />
    @Html.DisplayFor(model => model.ArchiveVideoDetails.Questions, "ListQuestions")
</div>

<div>
    <span asp-authorize asp-roles="Administrators">
        <a asp-page="./Edit" asp-route-id="@Model.ArchiveVideoDetails.Id">Edit</a> |
    </span>
    <a asp-page="./Index">Back to List</a>
</div>
@section scripts {
    <script type="text/javascript">
        (function () {
            var myPlayer = amp('vid1', { /* Options */
                "nativeControlsForTouch": false,
                autoplay: false,
                controls: true,
                width: "100%",
                poster: ""
            },
            function () {
                myPlayer.src([{
                    src: '@Model.ArchiveVideoDetails.VideoUrl',                    
                    type: "application/vnd.ms-sstr+xml"
                }]);
            });

            $('.ts').click(function (e) {     
                e.preventDefault();
                var link = $(e.currentTarget);
                var time = link.attr('data-time');
                myPlayer.currentTime(time);

            });

        })();

    </script>
}
